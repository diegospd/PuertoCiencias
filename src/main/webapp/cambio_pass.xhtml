<?xml version='1.0' encoding='UTF-8' ?> 
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui">

      <h:head>
            <!--Esto es para que funcione el dialogo del pastel sentimental-->
            <!--http://lauraliparulo.altervista.org/primefaces-dialog-framework-how-to-make-it-work/-->
            <h:outputScript name="jquery-ui-1.10.4.custom.min.js"/>


            <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
            <h:outputStylesheet name="./css/estilo.css"/>

            <h:outputStylesheet name="./css/default.css"/>
            <h:outputStylesheet name="./css/cssLayout.css"/>
            <title>Puerto Ciencias</title>

            <style type="text/css">
                  body{background-color:#036fab;
                       font-family: 'Allerta Stencil', sans-serif;}
                  header{background-color: #DAA520;
                         text-align: left;}
                  @font-face{
                        font-family: "cubic";
                        src:url("resources/cubic/cubic.ttf") format("truetype");
                  }

                  div   { text-align:center; }

                  header figure{float: left;
                                margin-right: 10px;}
                  h1{font-family:"cubic";
                     font-size: 1cm;}

                  header h1{font-family:"cubic";
                            color: #f7f7f7;
                            float: left;
                            font-size: 1.6cm;
                            display: block;
                            margin: 7px 80px 0px 50px;
                            padding: 0px;}
                  header figure img{width: 100px;
                                    height: 100px;
                                    border-radius:120%;
                                    src:url("resources/imagenes/tron2.jpg");
                  }
            </style>
      </h:head>

      <h:body>
            <div id="top" class="top">
                  <header>
                        <figure>
                              <img src="resources/imagenes/tron2.jpg"/>
                        </figure>
                        <ui:insert name="top"> <h1> Puerto Ciencias</h1> </ui:insert>
                        <br/>
                        <br/>
                        <br/>
                        <br/>
                        <br/>
                        <br/>
                        <br/>
                  </header>
                  <ui:insert name="top"> ¡Bienvenido ${user.username}! </ui:insert>


               
            </div>

            <f:view>

                  <div align="center">
                        <h:form id="cambio_contrasena">
                              <p:messages autoUpdate="true" id="messages" showDetail="true" />
                              <h:outputText value="Aquí puedes cambiar tu contraseña." style="font-weight:bold"/>
                              <br/>
                              <h:panelGrid columns="3">
                                    <h:outputText value="Contraseña actual:" />
                                    <h:inputSecret id="pass_actual"
                                                   requiredMessage="Debes escribir tu contraseña actual"
                                                   value="#{userManager.passCambio}"
                                                   required="false"/>
                                    <h:message for="cambio_contrasena:pass_actual" style="color: red"/>

                                    <h:outputText value="Nueva contraseña:" />
                                    <h:inputSecret id="pass_nueva1"
                                                   requiredMessage="Debes escribir una nueva contraseña"
                                                   value="#{userManager.passNueva1}"
                                                   required="false"/>
                                    <h:message for="cambio_contrasena:pass_nueva1" style="color: red"/>

                                    <h:outputText value="Confirma nueva contraseña:" />
                                    <h:inputSecret id="pass_nueva2"
                                                   requiredMessage="Debes de confirmar tu contraseña"
                                                   value="#{userManager.passNueva2}"
                                                   required="false"/>
                                    <h:message for="cambio_contrasena:pass_nueva2" style="color: red"/>
                              </h:panelGrid>

                              <h:panelGrid columns="2" >

                                    <p:commandButton value="Cambia tu contraseña" action="#{userManager.cambiarPassword(user.username)}"/>
                                    <p:commandLink value="Volver al foro" action="principal"/>

                              </h:panelGrid>


                        </h:form>
                  </div>
            </f:view>

      </h:body>
</html>

